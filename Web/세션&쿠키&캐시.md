# **쿠키(Cookie) & 세션(Session) & 캐시(Cache)**

웹 개발을 하다보면 쿠키, 세션, 캐시 라는 3가지 용어를 참 많이 듣게 되는데

이 차이를 명확하게 설명하고 이해하기 위해서 정리해보려 한다.

먼저 쿠키랑 세션을 쓰는 이유가 뭘까?

👉 HTTP 프로토콜의 특징이자 약점 영역을 보완하기 위해서 사용

#### **✅ HTTP 프로토콜 특징**

**1\. 비연경설 프로토콜**

Client가 Server로 요청을 보내고 요청에 맞는 응답을 보낸후 **연결을 끓는 방식**이다.

즉 커넥션을 계속 유지하는 것이 아니라는 것이다.

HTTP 1.1 버전에는 keep-alive 옵션을 통해서 커넥션을 재활용하는 기능이 있었음

**2\. Stateless 프로토콜**

커넥션을 끊는 순간 서버와 클라이언트의 통신은 끝나게 되며 **상태 정보를 유지하지 않는다**.

클라이언트와 서버가 한번 통신을 한 상태라고 다음 통신에서 이전 데이터를 유지하지 않는다.

❗ 근데 실제로는 상태정보를 유지해야하는 경우가 많다

> 예를 들어서 사용자가 로그인 한 상태에서 장바구니에 아이템을 담고 이러저리 쇼핑을 하는데 이때 마다 로그인 정보를 유지하지 않으면 계속 로그인을 해야하는 상황이 발생

> 즉 상태유지가 필요한 상황, 그리고 커넥션을 유지해야 하는 상황들이 필요한데 HTTP프로토콜 만으로 이를 해결할 수 없어 쿠키/세션을 사용하는 것이다.  

<script>(adsbygoogle = window.adsbygoogle || []).push({});</script>

## **1\. 쿠키(Cookie)**

사용자가 웹 사이트를 방문 할 때 그 사이트가 사용하고 있는 서버에서 사**용자의 컴퓨터에 저장하는 작은 기록 정보** 파일

HTTP 에서 클라이언트의 상태정보를 **클라이언트 PC에 저장**하고 필요시 **정보를 참조 및 재사용** 가능

#### **◼ 특징** 

-   이름/값/만료일/경로정보 로 구성
-   클라이언트에 300개의 쿠키 저장 가능
-   하나의 도메인당 20개의 쿠기
-   하나의 쿠기는 4kb 저장 가능

#### **◼ 동작 방식**

-   클라이언트가 페이지 요청
-   서버에서 쿠키 생성
-   HTTP 헤더에 쿠키 포함하여 응답 전송
-   브라우저가 종료되어도 쿠키 만료 기간 남으면 보관
-   같은 요청시 HTTP 헤더에 쿠키를 보냄
-   서버에서 쿠키를 읽어서 이전 상태 정보 볕경 시 쿠키 업데이트 후 다시 응답

## **2\. 세션(Session)**

일정 시간동안 같은 사용자로 부터 들어오는 요구를 하나의 상태로 인식하여 상태를 유지하는 기술

시간은 웹 서버에 접속한 시점부터 브라우저 연결 종료 시점까지는 의미

방문자가 **웹 서버에 접속한 상태를 하나의 단위로 보고 이를 세션이라고 명명**

예를 들어보자

김도도 라는 회원이 아이디와 비밀번호를 입력하고 어떤 웹 사이트에 로그인 하였다.

나의 설정이라는 창으로 이동하여 내 설정 정보들을 확인 가능하다.

이런 로직들을 수행할 때 서버는 로그인한 김도도 회원과 나의 설정을 클릭하여 요청한 김도도 씨가 같은 회원인지 모른다.

동일한 사람임을 모르면 매 클릭마다 로그인을 수행해야 하는 문제가 발생한다.

이런 것을 방지하는 것이 세션이다. 

세션은 로그인 후 다른 화면으로 이동해도 로그인이 해제되지 않는 상태를 유지해서 사용자 편의성을 높인다.

세션은 서버에서 관리하기 때문에 상대적으로 안전한 상태를 유지 할 수 있고 브라우저를 닫으면 삭제되기 때문에 쿠키 보다 보안이 좋다.

❓**세션은 어떻게 유지되나**

세션은 사용자가 로그인하면 일정 유효기간까지 사용자가 이미 인증 받음을 알려준다.

서버는 로그인에 성공한 사용자가 세션 아이디라는 사본 데이터를 만들어 보관

서버에 저장된 세션 아이디 사본 데이터는 쿠키로 저장되어 사용자가 행하는 이후 요청에 함께 전달

예를 들어서 친구목록을 확인하는 작업이 있다.

이때 친구목록이라는 버튼을 틀릭하면 클라이언트는 서버에 사용자의 친구목록 데이터를 요청하고 서버는 해당 요청에 세션 아이디가 있는지 확인한다. 그 이후 서버가 가지고 있는 세션아이디중 동일 정보가 있으면 해당 사용자의 친구 목록을 보내주는 것이다.

없는 경우에는 로그인하는 화면을 통해서 로그인 즉 사용자 정보를 입력하게끔 할 것이다.
![업로드중..](blob:https://velog.io/2ddf705c-83e9-4720-982f-27ef11880d31)


## ****3\. 캐시(Cache)****

캐시(Cache)는 웹 페이지 요소를 저장하기 위한 임시 저장소이다.

쿠키/세션은 정보를 저장하기 위해서 사용하지만 캐시는 웹을 빠르게 렌더링 할 수 있도록 도와준다.

#### **◼캐시 특징**

-   이미지, 비디오, 오디오, css, js 파일 등 데이터나 값을 미리 복사해놓은 리소스 파일들의 임시 저장소
-   저장공간 작고 비용이 비싼 대신 빠름
-   같은 웹 페이지에 접속 시 사용자 PC에서 로드하기 때문에 서버에서 X
-   사용된 데이터가 사용될 가능성이 많으면 캐시 서버 데이터 사용
-   다시 사용확률 데이터 빠르게 접근(로딩 속도 상승)

#### ❗ **차이점**

쿠키와 캐시 모두 정보를 저장하는 기술이다.

하지만 쿠키는 사용자의 수고를 덜어주는 것이 목적, 캐시는 데이터 전송량을 줄이고 속도를 높이는게 목적

## **4\. 쿠키 vs 캐시**

쿠키와 세션은 실제로 비슷한 역할과 동작 원리도 흡사하다

세션도 쿠키를 사용하기 때문에 그렇다. 하지만 둘 사이에는 가장 큰 차이점이 존재한다.

바로 **사용자의 정보가 저장되는 위치**이다.

쿠키는 서버의 자원을 사용하지 않고, 세션은 서버의 자원을 사용한다.

보안측면에서도 세션이 더 우수하다.

쿠키는 **클라이언트의 로컬 환경에 저장**되기 때문에 변질되거나 리퀘스트 스니핑으로 보안 취약 문제가 있다.

세션은 **쿠키를 이용해서 세션 아이디만 저장**하고 그것으로 구분하여 **서버에서 처리**하기 때문에 비교적 보안이 좋음

**유지 사이클**도 **쿠키**도 만료기간이 있지만 **파일로 저장되기 때문에 정보가 유지**, 만료기간을 지정해 쿠키 삭제 전까지 유지 시키기도 가능하다.

반면에 **세션**도 만료기간을 정할 수 있지만, **브라우저가 종료되면 만료기간에 상환없이 삭제**

제일 중요한 부분은 유지 사이클 즉 **라이프 사이클이 어떠냐이다.**

<script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
