# μ‹ κ·ν• μΈ μ •μ±… λ„μ…μ‹ λ¬Έμ μ 

> π’» μ¤ν”„λ§ ν•µμ‹¬ κΈ°μ  - κΈ°μ΄
ν•΄λ‹Ή κ°•μλ” κΉ€μν•λ‹μ μ¤ν”„λ§ ν•µμ‹¬ μ›λ¦¬- κΈ°μ΄ κ°•μλ¥Ό μκ°•ν•μ—¬ κ³µλ¶€ν• λ‚΄μ©μ€ κ°„λµν•κ² κΈ°λ΅ν•λ” κΈ°λ΅μ¥
[μ¤ν”„λ§ ν•µμ‹¬ μ›λ¦¬ κΈ°μ΄ κ°•μ](https://www.inflearn.com/course/%EC%8A%A4%ED%94%84%EB%A7%81-%ED%95%B5%EC%8B%AC-%EC%9B%90%EB%A6%AC-%EA%B8%B0%EB%B3%B8%ED%8E%B8#)

## μƒλ΅μ΄ μ£Όλ¬Έ ν• μΈ μ •μ±…
κΈ°μ΅΄ VIP  κ³ κ°μ€ 1000 μ›μ„ ν• μΈν•΄μ£Όλ” μ •μ±…
VIP κ³ κ°μ€ μ£Όλ¬Έ κΈμ•΅μ 10%λ¥Ό ν• μΈν•΄μ£Όλ” κ²ƒμΌλ΅ λ³€κ²½

κ·Έλ ‡κ² κΈ°μ΅΄ DiscountPolicy μΈν„°νμ΄μ¤λ¥Ό μƒμ†λ°›μ€ RateDiscountPolicyλ¥Ό μƒμ„±

κ·ΈλΌ μ΄μ  μƒμ„±λ ν• μΈ μ •μ±…μ„ μ–΄ν”λ¦¬μΌ€μ΄μ…μ— μ μ©ν•΄λ³΄μ

```java
public class OrderServiceImpl implements OrderService{
    private final MemberRepository memberRepository  = new MemoryMemberRepository();
    private final DiscountPolicy discountPolicy = new RateDiscountPolicy();
    @Override
    public Order createOrder(Long memberId, String itemName, int itemPrice) {
        Member member = memberRepository.findById(memberId);
        int discountAmount = discountPolicy.discount(member,itemPrice);

        return new Order(memberId,itemName,itemPrice,discountAmount);
    }
}
```

> λ¬Έμ μ μ€ ν΄λΌμ΄μ–ΈνΈμΈ OrderServiceImplμ μ½”λ“λ¥Ό λ°”κΏ”μ•Όν•λ‹¤!

### λ¬Έμ μ 
1. μ—­ν• κ³Ό κµ¬ν„μ„ μ¶©μ‹¤ν•κ² λ¶„λ¦¬ ---> O
2. λ‹¤ν•μ„±μ„ ν™μ©ν•κ³ , μΈν„°νμ΄μ¤μ™€ κµ¬ν„ κ°μ²΄λ¥Ό λ¶„λ¦¬ν–λ‹¤. ---> O
3. OCP, DIP κ°™μ€ κ°μ²΄μ§€ν–¥ μ„¤κ³„ μ›μΉ™ μ¤€μ
-> μ‚¬μ‹¤ μ•„λ‹λ‹¤
> DIP : μ£Όλ¬Έ μ„λΉ„μ¤ ν΄λΌμ΄μ–ΈνΈλ” DiscountPolicy μΈν„°νμ΄μ¤μ— μμ΅΄ν•λ©΄μ„ DIP λ¥Ό μ§€ν‚¨κ±°μ²λΌ λ³΄μΈλ‹¤?
>> ν΄λμ¤ μμ΅΄κ΄€κ³„λ¥Ό λ¶„μ„ν•΄λ³΄μ
μΈν„°νμ΄μ¤ λΏλ§ μ•„λ‹λΌ κµ¬ν„ ν΄λμ¤μ—λ„ μμ΅΄ν•κ³  μλ‹¤.
μΈν„°νμ΄μ¤ μμ΅΄ : DiscountPolicy
κµ¬ν„ ν΄λμ¤ μμ΅΄ : FixDiscountPolicy / RateDiscounPolicy

4.OCP : λ³€κ²½ν•μ§€ μ•κ³  ν™•μ¥ κ°€λ¥ν•λ‹¤
-> ν„μ¬ μ½”λ“λ” κΈ°λ¥μ„ ν™•μ¥ν•΄μ„ λ³€κ²½μ‹ ν΄λΌμ΄μ–ΈνΈ μ½”λ“μ— μν–¥μ„ μ¤€λ‹¤. OCP μ„λ°


## DIP & OCP μ„λ°°

#### κΈ°λ€ μμ΅΄ κ΄€κ³„
![](https://velog.velcdn.com/images/kimdodo/post/3f2364e0-71ac-4e74-8097-6606f47b113c/image.png)
#### μ‹¤μ  μμ΅΄ κ΄€κ³„
![](https://velog.velcdn.com/images/kimdodo/post/bbebf0dc-b09c-4c7c-9cd8-c051b1999182/image.png)

μ½”λ“ μƒμ—μ„ ν™•μΈν•΄λ³΄λ©΄ μ΄λ ‡λ‹¤
```java
private final DiscountPolicy discountPolicy = new RateDiscountPolicy();
```
μ¦‰ DiscountPolicy λΌλ” μ¶”μƒ ν΄λμ¤μ—λ„ μμ΅΄ν•μ§€λ§ new RateDiscountPolicy λΌλ” κµ¬ν„ ν΄λμ¤μ—λ„ μμ΅΄λλ” μƒν™©

DIP λ¥Ό μ„λ°ν•λ” μƒν™©

κ²°κµ­ μ—¬κΈ°μ„ FixDiscount λ¥Ό RateDiscountλ΅ λ°”κΎΈλ©΄μ„ ν΄λΌμ΄μ–ΈνΈμΈ OrderServiceImplμ μ†μ¤λ„ μμ •ν•΄μ•Όν•κΈ° λ•λ¬Έμ— OCP λ„ μ„λ°°λλ” μƒν™©

## λ¬Έμ  ν•΄κ²° λ°©λ²•
ν΄λΌμ΄μ–ΈνΈ μ½”λ“μΈ OrderServiceImplμ€ DiscountPolicy λΏλ§ μ•„λ‹λΌ κµ¬μ²΄ ν΄λμ¤μ—λ„ μμ΅΄
κ·Έλμ„ OCPλ„ μ„λ°°ν•κ² λλ‹¤. μ¦‰ DIP μ„λ° ν•΄κ²°μ„ μ„ν•΄μ„ μ¶”μƒν΄λμ¤μ—λ§ μμ΅΄ν•λ„λ΅ μμ •ν•΄μ•Όν•λ‹¤.
```java
private DiscountPolicy discountPolicy;
//μ΄λ°μ‹μΌλ΅ κµ¬μ²΄ ν΄λμ¤λ¥Ό ν• λ‹Ήν•μ§€ μ•λ” κ²ƒμΌλ΅ ν•΄κ²°ν•λ‹¤
```
> κ·Όλ° μ΄λ ‡κ² μ‹¤ν–‰ν•λ©΄ NPE μ—λ¬ ν„°μ§

κ²°κµ­ μ΄ λ¬Έμ λ¥Ό ν•΄κ²° ν•λ ¤κ³  OrderServiceImplμ— DiscountPolicyμ κµ¬ν„κ°μ²΄λ¥Ό λ€μ‹  μƒμ„±ν•΄μ„ μ£Όμ…ν•΄μ•Όν•λ‹¤.!

μ•„λ§ μ΄κ² μμ΅΄μ„±μ£Όμ… μ¦‰ DIλΌκ³  λ¶λ¦¬λ” κ²ƒμ΄λ‹¤.