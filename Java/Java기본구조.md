# **\[Java 기초\] Java 기본 구조 및 실행 과정**

자바 문법이 익숙해지고 어느덧 이전에 쓰던 파이썬 만큼 편안하게 언어를 사용할 수 있게 되었다.

문법이 익숙해지는 이 시기에 다시 한번 자바 문법과 동작 원리를 간단하게 정리하며 자바라는 언어에 대한 이해를 높이려고 이 포스팅 시리즈를 시작해보려 한다.

초심자도 읽기 쉽고, 개발을 하며 중요하다고 느낀 유용한 정보를 중심으로 시리즈를 시작한다.

이번 포스팅은 그 시작인 자바의 시작을 다뤄볼 예정이다.

<script>(adsbygoogle = window.adsbygoogle || []).push({});</script>

## **1\. Java란?**

자바는 대표적인 **객체 지향 프로그래밍 언어** 중 하나이다.

1995년 발표되어 가전제품에서 동작하는 프로그램을 위해 개발되었지만 현대에는 **웹 어플리케이션**에 널리 사용된다.

현재는 코틀린으로 개발하는 안드로이드 개발에서도 널리 사용된다.

자바는 UNIX 기반의 배경이라 C++과 C의 언어 체계와 유사하다.

자바의 가장 큰 특징 중 하나는 바로 **플랫폼 독립성** 이다.

플랫폼 독립성이란 어떤 기기나 운영체제에서도 동일한 소스로 프로그램의 구동이 가능한 것이다.

이를테면 윈도우에서 동작하던 Java 기반 어플리케이션이 Linux 운영 체제에서도 잘 실행 된다는 것이다.

이럴 수 있는 이유는 바로 **JVM** 이라는 자바의 실행 방식 때문이다.

그럼 자바의 실행 방식에 대해서 한번 알아보자

## ****2\. Java 실행 방식****

[##_Image|kage@Czli8/btsGJlvNsSa/vCUbqbQuTFl2fTnFVkdNM1/img.png|CDM|1.3|{"originWidth":516,"originHeight":146,"style":"alignCenter"}_##]

먼저 그림을 통해서 보자

Java 라는 언어로 소스 코드를 작성하면 컴파일러가 가상 기계어 파일인 자바 클래스 파일로 만들게 된다.

소스 코드를 자바 바이트 코드로 번역한다고 생각하면 된다.

이 번역된 자바 바이트코드를 JVM이 읽고 실행하는 것이다.

그럼 자바 바이트 코드는 뭘까?

#### **◼ 자바 바이트 코드**

JVM이 이해할 수 있는 언어로 변환된 자바 소스 코드를 말하는데, 자바 컴파일러에 의해 변환되는 코드의 명렁어 크기가 1바이트로 자바 바이트 코드라고 불린다.

자바 바이트 코드의 확장자는 .class 파일이며 자바 바이트 코드는 JVM 만 있으면 어디서든 실행이 가능하다.

그렇기 때문에 자바가 플랫폼에서 독립적인 언어라는 것이다.

어떤 환경에서도 JVM만 있으면 소스의 수정 없이 실행이 가능한 것이다.

## **3\. JVM**

#### **◼ JVM**

이제는 JVM에 대해서 알아보자

JVM은 **Java Virtual Machine** 의 약어로 해석하면 자바 가상 머신 이라는 뜻

OS 마다 따로 코드를 작성해야 하는 번거로움을 줄이고 **플랫폼 독립적으로 만들어주는 핵심**이다.

[##_Image|kage@XtnlO/btsGIN0F6Uw/yH3TzZHXK3TuisetKidoiK/img.png|CDM|1.3|{"originWidth":514,"originHeight":291,"style":"alignCenter"}_##]

위 그림을 보면 C 언어 같은 경우에는 기계어로 컴파일하고 하드웨어에 맞게 컴파일 되어야 한다.

> 아마 학부때 이클립스를 통해서 C언어를 배웠는데 이때 MinGW를 설치했었는데 이거 OS 에 맞는 컴파일러를 썼던 거 같다

하지만 Java는 JVM이 OS 와 프로그램 사이에 존재하며 그렇기 때문에 OS 에 맞는 JVM만 설치되어 있다면 자바 소스 자체를 새롭게 작성하지 않아도 된다.

즉 **JVM은 자바 클래스 파일**을 읽어 **바이트 코드로 해석** 후 **메모리에 자원 할당 관리하며 정보를 처리하는 작업**을 한다.

[##_Image|kage@rQIPF/btsGJNZYg1D/yb9UFupAaeeUexLPYo7sVK/img.png|CDM|1.3|{"originWidth":524,"originHeight":422,"style":"alignCenter"}_##]

JVM의 구조는 위 그림 처럼 구성되어 있다.

시작은 자바 소스 파일이 존재하고 이를 컴파일러를 통해서 자바 바이트 코드로 변환한다.

그 바이트 코드를 클래스 로더가 Runtime Data Area 에 배치된다.

👉 일반적인 윈도우 프로그램은 Load 과정을 OS가 수행한다.

Execution Engine 은 로딩된 클래스의 바이트 코드를 해석 한다. 바이트 코드는 2진코드로 변경된다.

일반적인 윈도우 프로그램은 어셈블리로 변환된 코드가 이진 코드로 변경된다.

Runtime Data Area는 총 5개의 영역으로 구성된다.

JVM이 프로세스로 수행되기 위해서 운영체제로 할당 받는 메모리 영역이며, 5가지가 존재한다.

1\. Method Area

모든 쓰레드에 공유되는 영역, 클래스 정보, 변수 정보, 메서드 정보, static 변수 정보, 상수 정보가 저장

2\. Heap Area

모든 쓰레드에 공유, new 명령어로 생성된 인스턴스와 객체가 저장되는 구역, 공간이 부족하면 GC 실행

3\. Stack Area

각 쓰레드마다 하나씩 생성, 메서드 안에 사용되는 값들이 저장되는 구역 (매개변수, 지역변수 리턴값 등) 

메서드 호출 시 LIFO로 생기며 메서드 실행 완료시 스택처럼 마지막 순서로 삭제

메서드의 스코프를 벗어나면 삭제되는 영역이다.

4\. PC Register 

각 쓰레드 마다 생성, CPU의 레지스터와 비슷하며 현재 수행중인 JVM 명령의 주소값 저장

5\. Native Method Stack 

각 쓰레드 마다 생성되며 다른 언어의 메서드 호출을 위해 할당되는 구역

언어에 맞게 생성된 JNI라는 표준 규약 제공

<script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
